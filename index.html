<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ChillBox</title>
<link rel="icon" type="image/png" href="logo.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
:root {
  --black: #101820;
  --accent: #1db954;
  --glow: 0 0 20px #1db954, 0 0 40px #1db954, 0 0 60px #1db954;
}

body {
  font-family:'Roboto',sans-serif;
  background-color:black;
  color:#fff;
  overflow-x:hidden;
  padding-top:70px;
}

/* ===== HEADER ===== */
header {
  position: fixed;
  top: 0; left: 0; right: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 6%;
  background-color: black;
  z-index: 9999;
  box-shadow: 0 2px 10px rgba(0,0,0,0.6);
}
.logo {
  font-size: 1.8rem;
  font-weight:700;
  color:#fff;
  display:flex;
  align-items:center;
  gap:8px;
  text-decoration:none;
}
.logo i { color: limegreen; }
.search-box {
  position: relative;
}

#searchInput {
  padding: 8px 12px;
  border-radius: 6px;
  border: none;
  outline: none;
  width: 180px;
  transition: width 0.3s ease;
}

#searchInput:focus {
  width: 250px;
}

#searchResults {
  position: absolute;
  top: 40px;
  left: 0;
  background: #111;
  width: 100%;
  max-height: 300px;
  overflow-y: auto;
  border-radius: 6px;
  display: none;
  z-index: 9999;
}

#searchResults div {
  padding: 8px 10px;
  cursor: pointer;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  display: flex;
  align-items: center;
  gap: 10px;
}

#searchResults div:hover {
  background: rgba(255,255,255,0.1);
}

#searchResults img {
  width: 40px;
  height: 60px;
  object-fit: cover;
  border-radius: 4px;
}

nav.navbar {
  display:flex;
  gap:10px;
  align-items:center;
  font-size: 17.5px;
}
nav.navbar a {
  color:#fff;
  text-decoration:none;
  font-size:0.95rem;
  padding:8px 12px;
  border-radius:6px;
}
nav.navbar a.active,
nav.navbar a:hover { 
  background:var(--accent); 
  color:#000; 
}

/* ===== HERO ===== */
.hero {
  position: relative;
  width:100%;
  height:95vh;
  display:flex;
  align-items:center;
  padding-left:60px;
  background-size:cover;
  background-position:center;
  transition: background-image 1s ease-in-out, transform 1s ease;
  overflow:hidden;
}
.hero::after {
  content:"";
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.55);
  z-index:1;
}
.hero-content {
  position:relative;
  z-index:3;
  max-width:600px;
  animation: fadeInUp 1s ease forwards;
}
@keyframes fadeInUp {
  0% {opacity:0; transform:translateY(30px);}
  100% {opacity:1; transform:translateY(0);}
}
.hero-title { font-size:75px; font-weight:900; margin:0; animation: fadeInUp 1.2s ease forwards;}
.hero-lang, .hero-rank, .hero-desc { animation: fadeInUp 1.4s ease forwards;}
.hero-lang { margin:15px 0; font-size:18px;}
.hero-rank { font-size:20px; color:#00ffae; font-weight:bold;}
.hero-desc { margin:15px 0; font-size:20px; max-width:450px;}
.btn { 
  display:inline-block; 
  padding:12px 25px; 
  background:var(--accent); 
  border-radius:6px; 
  font-size:17px; 
  margin-right:10px; 
  cursor:pointer; 
  font-weight:700; 
  color:black; 
  transition: all 0.3s ease;
}
.btn:hover{
  color: white;
  box-shadow: var(--glow);
  transform: scale(1.05);
}
.slider-title button:hover{
  color: white;
  box-shadow: var(--glow);
  transform: scale(1.05);
}
/* HERO ARROWS */
.nav-arrow { 
  position:absolute; 
  top:50%; 
  transform: translateY(-50%);
  font-size:26px; 
  cursor:pointer; 
  z-index:6; 
  background: rgba(0,0,0,0.5); 
  padding:8px; 
  border-radius:50%; 
  transition: all 0.3s ease;
  color: #fff;
}
.nav-arrow:hover {
  background: rgba(0,0,0,0.8);
  transform: translateY(-50%) scale(1.2);
}
.nav-left { left:0px; }
.nav-right { right:80px; }

/* PAGINATION DOTS */
.pagination-container {
  display: flex;
  justify-content: center;
  margin: 25px 0;
  overflow: hidden;
}

.pagination {
  display: flex;
  gap: 10px;
  transition: transform 0.6s ease;
  position: relative;
}

.dot {
  width: 10px;
  height: 10px;
  border-radius: 50px;
  background: rgba(255,255,255,0.25);
  transition: all 0.5s ease;
  opacity: 0;
  transform: scale(0.6);
}

.dot.active {
  width: 35px;
  background: #00ff99;
  box-shadow: 0 0 10px #00ff99, 0 0 30px #00ff99;
  opacity: 1;
  transform: scale(1);
}

.dot.show {
  opacity: 1;
  transform: scale(1);
}

/* ===== SLIDER SECTIONS ===== */
.slider-section { padding:20px 50px; position:relative; }
.slider-title { font-size:24px; margin-bottom:15px; font-weight:700; }
.movie-slider { display:flex; overflow:hidden; scroll-behavior:smooth; }

/* MOVIE CARDS */
.movie-card { 
  width:250px; height:380px;
  margin-right:15px;
  position:relative;
  cursor:pointer;
  flex-shrink:0;
  transition: transform 0.3s ease; 
  border-radius:8px;
  overflow:hidden;
}
.movie-card img { width:100%; height:100%; object-fit:cover; border-radius:8px; transition: transform 0.3s ease; }
.movie-card:hover img { transform: scale(1.05); }

.movie-overlay {
  position:absolute; bottom:0; left:0; width:100%;
  background: rgba(0,0,0,0.85);
  color:#fff;
  padding:10px;
  opacity:0;
  transform: translateY(100%);
  transition: all 0.3s ease;
}
.movie-card:hover .movie-overlay {
  opacity:1;
  transform: translateY(0);
}
.movie-overlay h3 { font-size:16px; font-weight:700; margin:3px 0; }
.movie-overlay p { font-size:12px; margin:2px 0; line-height:1.3; }

/* SLIDER ARROWS */
.slider-arrow { 
  position:absolute; 
  top:50%; transform:translateY(-50%);
  font-size:30px; cursor:pointer; z-index:10;
  background: rgba(0,0,0,0.5); padding:5px; border-radius:50%;
  color:#fff; transition: all 0.3s;
}
.slider-left { left:0; }
.slider-right { right:10px; }
.slider-arrow:hover { background: rgba(0,0,0,0.8); transform:translateY(-50%) scale(1.2); }

/* MODAL */
#movieModal {
  position: fixed; bottom:-100%; left:0; width:100%; height:100%;
  background:#000; display:block; overflow-y:auto;
  z-index:9999; padding:40px 20px; box-sizing:border-box;
  transition: bottom 0.5s ease;
}
#movieModal.active { bottom:0; }
#movieModal .closeBtn {
  position:absolute; top:20px; right:30px;
  font-size:40px; cursor:pointer; color:#fff;
}
#movieModal img.poster { width:300px; border-radius:6px; float:left; margin-right:20px; }
#movieModal h1 { font-size:36px; margin-top:0; }
#movieModal p { font-size:16px; line-height:1.5; }
#movieModal iframe { width:100%; max-width:700px; height:420px; border:none; border-radius:6px; margin-top:20px; }
.clearfix::after { content:""; display:block; clear:both; }

.actors-list { display:flex; flex-wrap:wrap; margin-top:20px; }
.actor-card { width:100px; margin:5px; text-align:center; }
.actor-card img { width:100%; border-radius:6px; height:140px; object-fit:cover; }
.actor-card p { font-size:12px; margin-top:3px; }

/* Server Selector */
.server-select {
  background: #111;
  color: #fff;
  border: 1px solid #1db954;
  padding: 6px 10px;
  border-radius: 6px;
  margin-top: 10px;
  cursor: pointer;
}
/* ===== FOOTER ===== */
.footer {
  background: #0b0b0b;
  padding: 50px 6%;
  color: #ccc;
  margin-top: 60px;
}

.footer-content {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
}
.footer i{
  color: limegreen;
}
.footer-logo {
  font-size: 45px;
  font-weight: 700;
  color: white;
  margin-bottom: 10px;
}

.footer-brand p {
  line-height: 1.6;
  margin-bottom: 15px;
}

.footer-social a {
  margin-right: 12px;
  color: white;
  font-size: 18px;
  transition: 0.3s;
}
.footer-social a:hover {
  color: var(--accent);
}

.footer-section {
  min-width: 150px;
  margin-top: 70px;
}

.footer-section h3 {
  color: white;
  margin-bottom: 12px;
  font-size: 18px;
}

.footer-section a {
  display: block;
  color: #ccc;
  text-decoration: none;
  margin-bottom: 8px;
  transition: 0.3s;
}
.footer-section a:hover {
  color: var(--accent);
}

.footer-copy {
  text-align: center;
  margin-top: 30px;
  margin-bottom: 0;
  color: #777;
  font-size: 14px;
  border-top: 1px solid rgba(255,255,255,0.1);
  padding-top: 20px;
}

</style>
</head>
<body>

<header>
  <a class="logo" href="#"><i class="fas fa-infinity"></i> ChillBox</a>
  <nav class="navbar">
    <a class="active" href="#movies">Movies</a>
    <a href="Music.html">Music</a>
    <a href="#">Games</a>
    <a href="#">About</a>
  </nav>
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search movies..." />
    <div id="searchResults"></div>
  </div>
</header>

<!-- HERO -->
<section class="hero" id="hero">
  <div class="hero-content">
    <h1 class="hero-title" id="heroTitle">Loading...</h1>
    <p class="hero-lang" id="heroLang"></p>
    <p class="hero-rank" id="heroRank"></p>
    <p class="hero-desc" id="heroDesc"></p>
    <div class="btn">Watch Now</div>
  </div>
  <div class="nav-arrow nav-left" id="prevBtn">&#10094;</div>
  <div class="nav-arrow nav-right" id="nextBtn">&#10095;</div>
</section>

<div class="pagination-container">
  <div class="pagination" id="pagination"></div>
</div>

<div id="slidersContainer"></div>
<div id="continueWatchingSection" class="slider-section" style="display:none;">
  <h2 class="slider-title" style="display:flex; justify-content:space-between;">
     Continue Watching
     <button onclick="clearContinueWatching()" style="
        background:var(--accent); padding:6px 12px; border:none;
        border-radius:6px; cursor:pointer; color:#fff; font-weight:600;"
     >Clear</button>
  </h2>

  <div class="movie-slider" id="continueWatchingSlider"></div>

  <!-- arrows -->
  <div class="slider-arrow slider-left" id="CWLeft">&#10094;</div>
  <div class="slider-arrow slider-right" id="CWRight">&#10095;</div>
</div>


<div id="movieModal">
  <span class="closeBtn" onclick="closeModal()">&times;</span>
  <div id="modalContent"></div>
</div>

<!-- ===== FOOTER ===== -->
<footer class="footer">
  <div class="footer-content">

    <div class="footer-brand">
      <h2 class="footer-logo"><i class="fas fa-infinity"></i> ChillBox</h2>
      <p>Stream Movies, play<br>Games, and enjoy<br>Music ‚Äì all in one place.</p>

      <div class="footer-social">
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-youtube"></i></a>
      </div>
    </div>

    <div class="footer-section">
      <h3>Sections</h3>
      <a href="#movies">Movies</a>
      <a href="Music.html">Music</a>
      <a href="#">Games</a>
      <a href="#">About Us</a>
    </div>

    <div class="footer-section">
      <h3>Support</h3>
      <a href="#">FAQ</a>
      <a href="#">Privacy Policy</a>
      <a href="#">Terms & Conditions</a>
    </div>

  </div>

  <p class="footer-copy">¬© 2025 ChillBox Entertainment. All rights reserved.</p>
</footer>


<script>
const API_KEY = "166830f0c57dfdbf8f9a4ebeb942d300";
const HERO = document.getElementById("hero");
let heroMovies = [], currentIndex = 0;

/* ===== TRENDING HERO MOVIES ===== */
async function loadHeroMovies() {
  const res = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}`);
  const data = await res.json();
  heroMovies = data.results.sort(() => Math.random() - 0.5).slice(0, 10);
  createPaginationDots();
  updateHero();
}

function updateHero() {
  const movie = heroMovies[currentIndex];
  HERO.style.backgroundImage = `url(https://image.tmdb.org/t/p/original${movie.backdrop_path})`;
  document.getElementById("heroTitle").innerText = movie.title;
  document.getElementById("heroLang").innerText = "Audio: English | Hindi | Tamil | Telugu | Malayalam | Kannada";
  document.getElementById("heroRank").innerText = `üî• Trending Rank: #${currentIndex + 1}`;
  document.getElementById("heroDesc").innerText = movie.overview.slice(0, 180) + "...";
  updateDots();
  HERO.onclick = () => openMovieModal(movie.id);
}

function createPaginationDots() {
  const pagination = document.getElementById("pagination");
  pagination.innerHTML = "";
  heroMovies.forEach((_, i) => {
    const dot = document.createElement("div");
    dot.className = "dot";
    dot.addEventListener("click", (e) => {
      e.stopPropagation();
      currentIndex = i;
      updateHero();
    });
    pagination.appendChild(dot);
  });
}

function updateDots() {
  document.querySelectorAll(".dot").forEach((dot, i) =>
    dot.classList.toggle("active", i === currentIndex)
  );
}

document.getElementById("prevBtn").addEventListener("click", (e) => {
  e.stopPropagation();
  currentIndex = (currentIndex - 1 + heroMovies.length) % heroMovies.length;
  updateHero();
});
document.getElementById("nextBtn").addEventListener("click", (e) => {
  e.stopPropagation();
  currentIndex = (currentIndex + 1) % heroMovies.length;
  updateHero();
});

setInterval(() => {
  if (heroMovies.length) {
    currentIndex = (currentIndex + 1) % heroMovies.length;
    updateHero();
  }
}, 6000);

loadHeroMovies();

/* ===== SEARCH FEATURE ===== */
const searchInput = document.getElementById("searchInput");
const searchResults = document.getElementById("searchResults");

searchInput.addEventListener("input", async function() {
  const query = this.value.trim();
  if (query.length < 2) {
    searchResults.style.display = "none";
    return;
  }

  const res = await fetch(`https://api.themoviedb.org/3/search/movie?query=${encodeURIComponent(query)}&api_key=${API_KEY}`);
  const data = await res.json();

  searchResults.innerHTML = data.results.slice(0, 6).map(movie => `
    <div onclick="openMovieModal(${movie.id});searchResults.style.display='none'">
      <img src="${movie.poster_path ? `https://image.tmdb.org/t/p/w200${movie.poster_path}` : 'https://via.placeholder.com/40x60'}">
      <span>${movie.title}</span>
    </div>
  `).join("");

  searchResults.style.display = "block";
});

document.addEventListener("click", e => {
  if (!searchResults.contains(e.target) && e.target !== searchInput) {
    searchResults.style.display = "none";
  }
});

/* ===== GENRE SLIDERS ===== */
let genreMap = {};
async function loadGenres() {
  const res = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`);
  const data = await res.json();
  data.genres.forEach(g => genreMap[g.id] = g.name);
}
loadGenres();

const categories = [
  { title: "Trending", url: `https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}` },
  { title: "Action", url: `https://api.themoviedb.org/3/discover/movie?with_genres=28&api_key=${API_KEY}` },
  { title: "Comedy", url: `https://api.themoviedb.org/3/discover/movie?with_genres=35&api_key=${API_KEY}` },
  { title: "Horror", url: `https://api.themoviedb.org/3/discover/movie?with_genres=27&api_key=${API_KEY}` },
  { title: "Romance", url: `https://api.themoviedb.org/3/discover/movie?with_genres=10749&api_key=${API_KEY}` },
  { title: "Science Fiction", url: `https://api.themoviedb.org/3/discover/movie?with_genres=878&api_key=${API_KEY}` }
];
/* ===== TV SHOW SLIDERS ===== */
/* ===== ANIME SLIDER (TMDB Animation Genre) ===== */
async function createAnimeSlider() {
  const container = document.getElementById("slidersContainer");

  const res = await fetch(`https://api.themoviedb.org/3/discover/tv?with_genres=16&api_key=${API_KEY}`);
  const data = await res.json();
  const animes = data.results.slice(0, 15);

  const section = document.createElement("div");
  section.className = "slider-section";
  section.innerHTML = `
    <h2 class="slider-title">Anime</h2>
    <div class="movie-slider" id="AnimeSlider"></div>
    <div class="slider-arrow slider-left" id="AnimeLeft">&#10094;</div>
    <div class="slider-arrow slider-right" id="AnimeRight">&#10095;</div>`;
  container.appendChild(section);

  const slider = document.getElementById("AnimeSlider");

  for (let anime of animes) {
    const card = document.createElement("div");
    card.className = "movie-card";
    card.innerHTML = `
      <img src="https://image.tmdb.org/t/p/w500${anime.poster_path}">
      <div class="movie-overlay">
        <h3>${anime.name}</h3>
        <p>‚≠ê ${anime.vote_average}/10</p>
      </div>`;
    slider.appendChild(card);

    card.onclick = () => openAnimeModal(anime.id);
  }

  document.getElementById("AnimeLeft").addEventListener("click", () => slider.scrollBy({ left: -270, behavior: "smooth" }));
  document.getElementById("AnimeRight").addEventListener("click", () => slider.scrollBy({ left: 270, behavior: "smooth" }));
}

createAnimeSlider();



async function createSliders() {
  const container = document.getElementById("slidersContainer");
  for (let cat of categories) {
    const res = await fetch(cat.url);
    const data = await res.json();
    const movies = data.results.slice(0, 15);

    const section = document.createElement("div");
    section.className = "slider-section";
    section.innerHTML = `
      <h2 class="slider-title">${cat.title}</h2>
      <div class="movie-slider" id="${cat.title.replace(/\s/g, '')}Slider"></div>
      <div class="slider-arrow slider-left" id="${cat.title.replace(/\s/g, '')}Left">&#10094;</div>
      <div class="slider-arrow slider-right" id="${cat.title.replace(/\s/g, '')}Right">&#10095;</div>`;
    container.appendChild(section);

    const slider = document.getElementById(`${cat.title.replace(/\s/g, '')}Slider`);
    for (let movie of movies) {
      const card = document.createElement("div");
      card.className = "movie-card";
      const genreNames = movie.genre_ids.map(id => genreMap[id]).join(", ");
      card.innerHTML = `
        <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}">
        <div class="movie-overlay">
          <h3>${movie.title}</h3>
          <p>Year: ${movie.release_date ? movie.release_date.slice(0, 4) : 'N/A'} | ‚≠ê ${movie.vote_average}/10</p>
          <p>Genres: ${genreNames || 'N/A'}</p>
        </div>`;
      slider.appendChild(card);
      card.onclick = () => openMovieModal(movie.id);
    }

    document.getElementById(`${cat.title.replace(/\s/g, '')}Left`).addEventListener("click", () => {
      slider.scrollBy({ left: -270, behavior: "smooth" });
    });
    document.getElementById(`${cat.title.replace(/\s/g, '')}Right`).addEventListener("click", () => {
      slider.scrollBy({ left: 270, behavior: "smooth" });
    });
  }
}
async function createTVSliders() {
  const container = document.getElementById("slidersContainer");

  for (let cat of tvCategories) {
    const res = await fetch(cat.url);
    const data = await res.json();
    const shows = data.results.slice(0, 15);

    const section = document.createElement("div");
    section.className = "slider-section";
    section.innerHTML = `
      <h2 class="slider-title">${cat.title}</h2>
      <div class="movie-slider" id="${cat.title.replace(/\s/g, '')}TVSlider"></div>
      <div class="slider-arrow slider-left" id="${cat.title.replace(/\s/g, '')}TVLeft">&#10094;</div>
      <div class="slider-arrow slider-right" id="${cat.title.replace(/\s/g, '')}TVRight">&#10095;</div>`;
    container.appendChild(section);

    const slider = document.getElementById(`${cat.title.replace(/\s/g, '')}TVSlider`);

    for (let show of shows) {
      const card = document.createElement("div");
      card.className = "movie-card";
      card.innerHTML = `
        <img src="https://image.tmdb.org/t/p/w500${show.poster_path}">
        <div class="movie-overlay">
          <h3>${show.name}</h3>
          <p>Rating: ‚≠ê ${show.vote_average}/10</p>
        </div>`;
      slider.appendChild(card);

      // ‚úÖ plays episodes
      card.onclick = () => openTVShowModal(show.id);
    }

    document.getElementById(`${cat.title.replace(/\s/g, '')}TVLeft`).addEventListener("click", () => {
      slider.scrollBy({ left: -270, behavior: "smooth" });
    });
    document.getElementById(`${cat.title.replace(/\s/g, '')}TVRight`).addEventListener("click", () => {
      slider.scrollBy({ left: 270, behavior: "smooth" });
    });
  }
}
createTVSliders();

createSliders();
/* ===== Continue Watching (localStorage) ===== */
/* ===== Continue Watching (localStorage + slider arrows + clear button) ===== */

function saveToContinueWatching(movie) {
  let history = JSON.parse(localStorage.getItem("continueWatching")) || [];

  history = history.filter(item => item.id !== movie.id);
  history.unshift(movie);
  history = history.slice(0, 15);

  localStorage.setItem("continueWatching", JSON.stringify(history));
}

function clearContinueWatching() {
  localStorage.removeItem("continueWatching");
  loadContinueWatching();
}

function loadContinueWatching() {
  const section = document.getElementById("continueWatchingSection");
  const slider = document.getElementById("continueWatchingSlider");

  const history = JSON.parse(localStorage.getItem("continueWatching")) || [];

  if (history.length === 0) {
    section.style.display = "none";
    return;
  }

  section.style.display = "block";
  slider.innerHTML = "";

  history.forEach(movie => {
    const card = document.createElement("div");
    card.className = "movie-card";
    card.innerHTML = `
      <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}">
      <div class="movie-overlay"><h3>${movie.title}</h3></div>
    `;
    card.onclick = () => openMovieModal(movie.id);
    slider.appendChild(card);
  });

  // ‚úÖ Arrow scroll control
  document.getElementById("CWLeft").onclick = () =>
    slider.scrollBy({ left: -270, behavior: "smooth" });

  document.getElementById("CWRight").onclick = () =>
    slider.scrollBy({ left: 270, behavior: "smooth" });
}

loadContinueWatching();

/* ===== MOVIE MODAL ===== */
/* ===== MOVIE MODAL WITH AUTO SERVER DETECTION ===== */
async function openMovieModal(movieId) {
  const modal = document.getElementById("movieModal");
  const modalContent = document.getElementById("modalContent");

  modal.classList.add("active");

  modalContent.innerHTML = "<h2 style='text-align:center;'>Loading...</h2>";

  // ‚úÖ fetch movie data
  const [movieRes, creditsRes] = await Promise.all([
    fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=en-US`),
    fetch(`https://api.themoviedb.org/3/movie/${movieId}/credits?api_key=${API_KEY}&language=en-US`)
  ]);

  const movie = await movieRes.json();

  // ‚úÖ SAVE TO WATCH HISTORY
  saveToContinueWatching(movie);
  loadContinueWatching();

  const credits = await creditsRes.json();

  const servers = [
    { name: "Vidsrc", url: `https://vidsrc.net/embed/movie?imdb=${movie.imdb_id}` },
    { name: "MoviesAPI", url: `https://moviesapi.club/movie/${movie.imdb_id}` },
    { name: "SmashyStream", url: `https://smashystream.com/embed/${movie.imdb_id}` },
    { name: "Moviee", url: `https://moviee.to/embed/${movie.imdb_id}` }
  ];

  const actors = credits.cast.slice(0, 12).map(a => `
    <div class="actor-card">
      <img src="${a.profile_path ? `https://image.tmdb.org/t/p/w185${a.profile_path}` : 'https://via.placeholder.com/100x150'}">
      <p>${a.name}</p>
    </div>
  `).join("");

  modalContent.innerHTML = `
    <div class="clearfix">
      <img class="poster" src="https://image.tmdb.org/t/p/w300${movie.poster_path}">
      <h1>${movie.title}</h1>
      <p><strong>Release:</strong> ${movie.release_date} | ‚≠ê ${movie.vote_average}</p>
      <p><strong>Genres:</strong> ${movie.genres.map(g => g.name).join(", ")}</p>
      <p>${movie.overview}</p>

      <h2>Cast</h2>
      <div class="actors-list">${actors}</div>

      <center>
        <h2>Watch Movie</h2>
        <label><strong>Select Server:</strong></label>
        <select id="serverSelect" class="server-select">
          ${servers.map(s => `<option value="${s.url}">${s.name}</option>`).join("")}
        </select>

        <iframe id="movieFrame"
          width="100%" height="420" allowfullscreen
          style="border-radius:6px;border:2px solid white;margin-top:10px;">
        </iframe>
      </center>
    </div>
  `;

  const serverSelect = document.getElementById("serverSelect");
  const movieFrame = document.getElementById("movieFrame");

   movieFrame.src = serverSelect.value; // ‚úÖ load instantly

  serverSelect.addEventListener("change", () => {
    movieFrame.src = serverSelect.value;
  });
}
/* ===== ANIME MODAL (SEPARATE FUNCTION) ===== */
async function openAnimeModal(animeId) {
  const modal = document.getElementById("movieModal");
  const modalContent = document.getElementById("modalContent");

  modal.classList.add("active");
  modalContent.innerHTML = "<h2 style='text-align:center;'>Loading...</h2>";

  const anime = await fetch(`https://api.themoviedb.org/3/tv/${animeId}?api_key=${API_KEY}`)
    .then(r => r.json());

  let episodesHTML = "";
  const totalEpisodes = anime.number_of_episodes;
  const season = 1; // default season for simplicity

  for (let ep = 1; ep <= totalEpisodes; ep++) {
    episodesHTML += `
      <button class="btn" onclick="playEpisode('${animeId}', '${season}', '${ep}')">
        Episode ${ep}
      </button>
    `;
  }

  modalContent.innerHTML = `
    <div class="clearfix">
      <img class="poster" src="https://image.tmdb.org/t/p/w300${anime.poster_path}">
      <h1>${anime.name}</h1>
      <p><strong>Seasons:</strong> ${anime.number_of_seasons}</p>
      <p><strong>Total Episodes:</strong> ${anime.number_of_episodes}</p>
      <p>${anime.overview}</p>

      <h2>Episodes</h2>
      <div style="display:flex; flex-wrap:wrap; gap:10px;">${episodesHTML}</div>

      <iframe id="movieFrame" width="100%" height="420" allowfullscreen style="margin-top:20px;"></iframe>
    </div>
  `;
}

function playEpisode(id, season, episode) {
  const frame = document.getElementById("movieFrame");
  frame.src = `https://vidsrc.xyz/embed/tv/${id}/${season}/${episode}`;
}


function closeModal() {
  const modal = document.getElementById("movieModal");
  modal.classList.remove("active");

  const frame = document.getElementById("movieFrame");
  if (frame) frame.src = "";
}

</script>
</body>
</html>
